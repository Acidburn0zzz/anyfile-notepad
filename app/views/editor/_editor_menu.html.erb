<div class="navbar navbar-default" id="menu">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" onclick="javascript:top_menu_controller.toggle_mobile_menu()">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/"><%= image_tag "logo.png", :width => 50, :height => 50 %><div class="ripple-wrapper"><div class="ripple ripple-on" style="left: 63.5px; top: 23px; -webkit-transform: scale(9.625); transform: scale(9.625); background-color: rgba(255, 255, 255, 0.843137);"></div></div></a>
  </div>
  <div class="extended_menu">
    <ul class="nav navbar-nav">
      <!-- FILE/* -->
      <li>
        <a href="javascript:void(0)" class="menu_item">{{ i18n "File" }}</a>

        <div class="menu_content">
          <ul class="menu_list">
            <li><a href="#new" target="_blank" onclick="javascript:menu_controller.hide_menu();">{{ i18n "New" }}</a></li>

            <li><a href="javascript:void(0);" onclick="javascript:editor_controller.save();menu_controller.hide_menu();" >{{ i18n "Save" }}</a></li>

            <li><a href="javascript:void(0);" onclick="javascript:editor_controller.open_share_modal();menu_controller.hide_menu();" >{{ i18n "Share" }}</a></li>

            <li><a href="javascript:void(0);" onclick="javascript:editor_controller.print();menu_controller.hide_menu()" >{{ i18n "Print" }}</a></li>
            
            <li>
              <a href="javascript:void(0);" onclick="javascript:editor_controller.open_search();menu_controller.hide_menu()">
                {{ i18n "Search" }} (Ctrl-F)
              </a>
            </li>
            
            <li>
              <a href="javascript:void(0);" onclick="javascript:editor_controller.open_replace();menu_controller.hide_menu()">
                {{ i18n "Search & replace" }}
              </a>
            </li>
            
            <li><a href="<%= root_path %>">{{ i18n "App home page" }}</a></li>

            <li><a href="javascript:void(0);" onclick="javascript:editor_controller.show_file_info();menu_controller.hide_menu()" >{{ i18n "Show file info" }}</a></li>

            <li><a href="javascript:void(0);" onclick="javascript:user_preferences.reset();menu_controller.hide_menu();alert('{{ i18n "You should now restart the app to fully flush your preferences." }}')">{{ i18n "Reset preferences" }}</a></li>

            <li><a href="javascript:void(0);" onclick="javascript:editor_controller.restart_app()">{{ i18n "Restart app" }}</a></li>
          </ul>
        </div>
      </li>
      <!-- */FILE -->

      <li>
        <a href="javascript:void(0)" class="menu_item">{{ i18n "Open" }}</a>
        <div class="menu_content">
          <%= render 'shared/file_explorer', :with_dropdown => true %>
        </div>
      </li>

      <li>
        <a href="javascript:void(0)" class="menu_item">{{ i18n "Favorites" }}</a>
        <div class="menu_content">
          <ul class="menu_list favorites">
          </ul>
        </div>
      </li>

      <!-- OPTIONS/* -->
      <li>
        <a href="javascript:void(0)" class="menu_item" >{{ i18n "Options" }}</a>
        <div class="menu_content" data-show-callback="editor_controller.options_show_callback()">
          <div class="options">

            <div class="row">

              <div class="col-md-3">
                {{ i18n "Editor mode" }} :
                <select class="keybinding_select form-control">
                  <option value="normal">{{ i18n "Normal" }}</option>
                  <option value="vim">{{ i18n "vim" }}</option>
                  <option value="emacs">{{ i18n "Emacs" }}</option>
                </select>
              </div>

              <div class="col-md-3">
                {{ i18n "Tab size" }} : 
                <select class="tab_size_select form-control">
                  <option value="2">{{ i18n "2" }}</option>
                  <option value="3">{{ i18n "3" }}</option>
                  <option value="4">{{ i18n "4" }}</option>
                  <option value="5">{{ i18n "5" }}</option>
                </select>
              </div>

              <div class="col-md-3">
                {{ i18n "Font size" }} :
                <select class="font_size_select form-control">
                  <option value="0.5em">{{ i18n "Small" }}</option>
                  <option value="1em">{{ i18n "Normal" }}</option>
                  <option value="1.5em">{{ i18n "Large" }}</option>
                  <option value="2em">{{ i18n "X-large" }}</option>
                </select>
              </div>

              <div class="col-md-3">
                <div class="togglebutton">
                  <label>
                    {{ i18n "Word wrapping" }} : <input type="checkbox" class="word_wrap_checkbox">
                  </label>
                </div>
              </div>

            </div>

            <div class="row">
              <div class="col-md-4">
                <a class="sub_menu_item btn btn-primary" href="javascript:void(0)">{{ i18n "Select syntax" }}</a>
                  <div class="menu_content">
                      <div class="syntaxes">
                        <a href="javascript:void(0)" class="menu_back btn btn-primary btn-fab btn-raised mdi-navigation-arrow-back"></a>
                        <ul class="menu_list">
                          <% build_syntax_menus.each do |letters, syntaxes| %>
                              <li>
                              <a href="javascript:void(0);" class="sub_menu_item" ><%=letters%></a>
                              <div class="menu_content">
                                <div class="syntaxes">
                                  <a href="javascript:void(0)" class="menu_back btn btn-primary btn-fab btn-raised mdi-navigation-arrow-back"></a>
                                   <ul class="menu_list">
                                      <% syntaxes.each do |syntax| %>
                                        <li>
                                          <a href="javascript:void(0);" class="syntax_button syntax_<%= syntax.ace_js_mode %>" onclick="menu_controller.hide_menu();editor_controller.set_syntax_mode('<%= syntax.ace_js_mode %>',true);">
                                            <%= syntax.display_name %>
                                          </a>                  
                                        </li>
                                      <% end %>
                                  </ul>
                                </div>
                               
                              </div>
                            </li>
                          <% end %>
                        </ul>
                      </div>
                  </div>
              </div>

              <div class="col-md-4">
                <a class="sub_menu_item btn btn-primary" href="javascript:void(0)">{{ i18n "Select theme" }}</a>
                <div class="menu_content">
                  <div class="row themes">
                  <a href="javascript:void(0)" class="menu_back themes_back btn btn-primary btn-fab btn-raised mdi-navigation-arrow-back"></a>
                    <% 
                    themes = themes_list 
                    themes.prepend("dummy")
                    themes.prepend("dummy")
                    themes.prepend("dummy")
                    %>
                    <% themes.each_slice(12).to_a.each do |theme_array| %>
                      <div class="col-md-4">
                        <div class="theme_choice_column btn-group-vertical"> 
                          <% theme_array.each do |theme| %>
                            <% if theme == "dummy" %>
                              <a href="javascript:void(0);" class="btn-dummy"><%= theme_display_name(theme) %></a>
                            <% else %>
                              <a href="javascript:void(0);" class="btn btn-default btn_theme theme_<%=theme_name(theme)%>" onclick="javascript:menu_controller.hide_menu();editor_controller.select_theme('<%= theme_name(theme) %>')"><%= theme_display_name(theme) %></a>
                            <% end %>
                          <% end %>
                        </div>
                      </div>
                    <% end %>
                  </div>
                </div>
              </div>

              <div class="col-md-4">
                <a class="sub_menu_item btn btn-primary" href="javascript:void(0)">{{ i18n "Select language" }}</a>
                <div class="menu_content">
                  <ul class="menu_list">
                    <div class="text-center"><a href="javascript:void(0)" class="menu_back btn btn-primary btn-fab btn-raised mdi-navigation-arrow-back"></a></div>
                    <li><a href="javascript:void(0)" onclick="javascript:editor_controller.select_locale('auto')" data-locale="auto">Auto detected</a></li>
                    {{#each locales}}
                    <li><a href="javascript:void(0)" onclick="javascript:editor_controller.select_locale('{{@key}}')">{{this}}</a></li>
                    {{/each}}
                  </ul>
                </div>
              </div>


            </div>

          </div><!-- */OPTIONS CONTENT -->
        </div>
      </li><!-- */OPTIONS -->

    </ul>
    <form id="file_title_form" class="navbar-form navbar-left" onsubmit="javascript:editor_controller.save();return false;">
      <input type="text" data-bind-file="title" class="form-control col-lg-8" placeholder="{{ i18n "Filename" }}">
      <a href="javascript:void(0);" class="editor_save_button" >{{ i18n "Save" }}</a>
    </form>
    <span class="collaborators"></span>
  </div>
  <div id="expanded_menu">
  </div>
</div>
