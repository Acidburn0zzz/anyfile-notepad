<div class="g_file_menu">
  <%= form_for @file, :html => {:class => :editor_form } do |f| %>
    
    <%= f.hidden_field :id %>
    <%= f.hidden_field :folder_id %>
    <%= f.hidden_field :content %>
      <div>
        <% f.text_field :type, :disabled => true %>
      </div>
      
      <%= render 'shared/flash', :flash => flash %>
      <div class="panel panel-default">
        <div class="panel-heading">
          
          <h3 class="panel-title app_title"><%= image_tag "logo.png", :width => 25, :height => 25 %> <%= f.label "Anyfile Notepad" %> <%= image_tag "logo.png", :width => 25, :height => 25 %></h3>
        </div>
        <div class="panel-body">
          <div class="file_title input-group">
            
            <%= f.text_field :title, :class=> "field form-control", :placeholder => "File title" %>
            <span class="input-group-btn ">
              <%= f.submit "SAVE", :class => "btn btn-primary"%>
            </span>
          </div>
          
          <div class="input-group ">
            <%= f.label "Save as new revision", :class => "form-control", :for => "g_file_new_revision" %>
            <span class="input-group-addon">
              <%= f.check_box :new_revision %>
            </span>
          </div>
        </div>
      </div>

      <%= render 'shared/error_messages', :object => f.object %>
      
  <% end %>
  
  <div class="ads">
    <%= render 'shared/small_square_ad' %>
  </div>
  
  <div class="g_file_editor_file_explorer">
    <%= render 'shared/file_explorer', :with_dropdown => true %>
  </div>
  
<div>

<div class="g_file_editor">
  
  <div id="editor"><%= @file.content %></div>
  <script>
      var editor = ace.edit("editor");
      editor.setTheme("ace/theme/dawn");
      //editor.getSession().setMode("ace/mode/javascript");
      
      $('.editor_form').submit(function(){
          $('#g_file_content').val(editor.getValue())
      });
  </script>
</div>